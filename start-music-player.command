#!/bin/bash

# ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd "$(dirname "$0")"

echo "ğŸµ ìŒì•… í”Œë ˆì´ì–´ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤..."

# í¬íŠ¸ 3000ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ìˆë‹¤ë©´ ì¢…ë£Œ
if lsof -Pi :3000 -sTCP:LISTEN -t >/dev/null ; then
    echo "âš ï¸  í¬íŠ¸ 3000ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤..."
    lsof -ti:3000 | xargs kill -9 2>/dev/null
    sleep 2
fi

# í¬íŠ¸ 3001ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ìˆë‹¤ë©´ ì¢…ë£Œ
# if lsof -Pi :3001 -sTCP:LISTEN -t >/dev/null ; then
#     echo "âš ï¸  í¬íŠ¸ 3001ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤..."
#     lsof -ti:3001 | xargs kill -9 2>/dev/null
#     sleep 2
# fi

echo "ğŸš€ React ì•±ê³¼ Electronì„ ì‹¤í–‰í•©ë‹ˆë‹¤..."

# React ì•±ê³¼ Electronì„ í•¨ê»˜ ì‹¤í–‰
npm run electron-dev

echo "âœ… ìŒì•… í”Œë ˆì´ì–´ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!"


